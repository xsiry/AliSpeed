define(function(f,h,d){var i=f("jquery");f("bootstrap");var g=f("../index/module_account");var a=i("#login-window");var b="/user/login";d.exports={init:function(){f("waves");
Waves.displayEffect();j();c();this._bindUI();},_bindUI:function(){a.on("focus",".form-control",function(){i(this).parent().addClass("fg-toggled");});a.on("blur",".form-control",function(){i(this).parent().removeClass("fg-toggled");
});a.on("click","#login-bt",function(){i("#loginForm").submit();});a.on("keypress","#username, #password",function(k){if(k.which==="13"){i("#loginForm").submit();
}});i(document).on("focus",'input[type="text"]',function(){i(this).parent().find("label").addClass("active");}).on("blur",'input[type="text"]',function(){if(i(this).val()==""){i(this).parent().find("label").removeClass("active");
}});i(document).on("focus",'input[type="password"]',function(){i(this).parent().find("label").addClass("active");}).on("blur",'input[type="password"]',function(){if(i(this).val()==""){i(this).parent().find("label").removeClass("active");
}});i("body").on("click",".register_btn",function(){g._register();});}};function j(){f("formValidation");f("fvbootstrap");f("fvzh_CN");i(".fg-line:first").addClass("fg-toggled");
i("#loginForm").formValidation({autoFocus:true,locale:"zh_CN",message:"该值无效，请重新输入",err:{container:"tooltip"},icon:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{validators:{notEmpty:{message:"账号不能为空"},regexp:{regexp:/^[a-zA-Z0-9_]+$/}}},password:{validators:{notEmpty:{message:"密码不能为空"}}}}}).on("success.form.fv",function(m){m.preventDefault();
var l=i(m.target);var k=l.data("formValidation");i.post(b,l.serialize(),function(n){f("toastr");toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:4000};
if(n.success){e();location.href="index_.html";toastr.success("登录成功！");}else{toastr.error(n.msg);return false;}},"json");});}function c(){f("cookie");if(i.cookie("rmbUser")==="true"){i("#rmbUser").prop("checked",true);
i("#username").val(i.cookie("userName"));}}function e(){if(i("#rmbUser").is(":checked")===true&&i("#rmbPassWord").is(":checked")===true){var l=i("#username").val();
var k=i("#password").val();i.cookie("rmbUser","true",{expires:7});i.cookie("rmbPassWord","true",{expires:7});i.cookie("userName",l,{expires:7});i.cookie("passWord",k,{expires:7});
}else{if(i("#rmbUser").is(":checked")===true){var m=i("#username").val();i.cookie("rmbUser","true",{expires:7});i.cookie("userName",m,{expires:7});i.cookie("rmbPassWord","false",{expires:-1});
i.cookie("passWord","",{expires:-1});}else{i.cookie("rmbUser","false",{expires:-1});i.cookie("rmbPassWord","false",{expires:-1});i.cookie("userName","",{expires:-1});
i.cookie("passWord","",{expires:-1});}}}});